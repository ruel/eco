<%- partial('partials/header') %>

<div class="container page">
  <div class="row">
    <center>
      <h2 class="text-color-1"><%= user.first_name %> <%= user.last_name %></h2>
      <h4 class="text-color-1"><%= user.level.name %></h4>
    </center>
  </div>
  <hr>
  <div class="content-frame">
    <div class="row">
      <div class="col-md-6 col-xs-6">
        <h3 class="text-color-4 text-left">Supported Projects (<%= user.supported.length %>)</h3>
      </div>
      <div class="col-md-6 col-xs-6">
        <% if(user.supported.length !== 0) { %>
        <a class="btn btn-2 pull-right margin-t" type="button" href="/projects">Browse more projects</a><br>
        <% } %>
      </div>
    </div>
    <div class="row">
      <% if(user.supported.length === 0) { %>
        <center>
          <h4 class="text-color-2">Oops, no supported green projects here yet.</h4>
          <a class="btn btn-lg btn-1" type="button" href="/projects">SUPPORT A PROJECT</a><br>
        </center>
      <% } else { %>
        <div class="table-container">
          <table class="table table-hover">
              <thead>
                <tr>
                  <th>#</th>
                  <th>Project Name</th>
                  <th>Category</th>
                  <th>Details</th>
                </tr>
              </thead>
              <tbody>
                <% for (var i in user.supported) { %>
                <tr>
                  <td><%= parseInt(i) + 1 %></td>
                  <td><%= user.supported[i].name %></td>
                  <td><%= user.supported[i].category.name %></td>
                  <td><a href="/projects/<%= user.supported[i].id %>">View Details</a></td>
                </tr>
                <% } %>
              </tbody>
            </table>
        </div>
      <% } %>
    </div>
  </div>
  <br>
  <div class="content-frame">
    <div class="row">
      <div class="col-md-6 col-xs-6">
        <h3 class="text-color-4 text-left">Projects started (<%= user.projects.length %>)</h3>
      </div>
      <div class="col-md-6 col-xs-6">
        <% if(user.projects.length !== 0) { %>
        <a class="btn btn-trans-blk pull-right margin-t" type="button" href="/projects">Browse more projects</a><br>
        <% } %>
      </div>
    </div>
    <div class="row">
      <% if(user.projects.length === 0) { %>
        <center>
          <h4 class="text-color-2">Have an idea that can slow down climate change? We'll help you out!</h4>
          <a class="btn btn-lg btn-1" type="button" href="/projects/add">START A PROJECT</a><br>
        </center>
      <% } else { %>
        <div class="table-container">
          <table class="table table-hover">
              <thead>
                <tr>
                  <th>#</th>
                  <th>Project Name</th>
                  <th>Category</th>
                  <th>Details</th>
                </tr>
              </thead>
              <tbody>
                <% var j = 0; %>
                <% user.projects.forEach(function(project) { %>
                <% j++; %>
                <tr>
                  <td><%= parseInt(j) %></td>
                  <td><%= project.name %></td>
                  <td><%= project.category.name %></td>
                  <td><a href="/projects/<%= project.id %>">View Details</a></td>
                </tr>
                <% }); %>
              </tbody>
            </table>
        </div>
      <% } %>
    </div>
  </div>
</div>
<br>

<%- partial('partials/footer') %>
